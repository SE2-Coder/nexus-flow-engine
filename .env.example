# ==========================================
# üöÄ AppFlowy Production Configuration
# ==========================================

# üåê DOMAIN CONFIGURATION
# ------------------------------------------
# The port Nginx listens on internally (Default: 80 for Dokploy/Traefik routing)
NGINX_PORT=80
# The public URL of your AppFlowy instance (e.g., https://flowy.se2code.com)
APPFLOWY_BASE_URL=https://your-domain.com
APPFLOWY_WEB_URL=https://your-domain.com
# For Realtime Collaboration (WebSockets)
APPFLOWY_WS_BASE_URL=wss://your-domain.com/ws/v2

# üóÑÔ∏è DATABASE (POSTGRES)
# ------------------------------------------
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD
POSTGRES_DB=postgres
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# ‚ö° REDIS (CACHE & QUEUE)
# ------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
APPFLOWY_REDIS_URI=redis://redis:6379

# üì¶ OBJECT STORAGE (MINIO / S3)
# ------------------------------------------
# Set to true to use the included MinIO service. Set to false for AWS S3.
APPFLOWY_S3_USE_MINIO=true
# Internal URL for services to reach MinIO
APPFLOWY_S3_MINIO_URL=http://minio:9000
# Credentials (CHANGE THESE!)
AWS_ACCESS_KEY=minioadmin
AWS_SECRET=CHANGE_THIS_MINIO_PASSWORD
APPFLOWY_S3_ACCESS_KEY=minioadmin
APPFLOWY_S3_SECRET_KEY=CHANGE_THIS_MINIO_PASSWORD
APPFLOWY_S3_BUCKET=appflowy

# üîê AUTHENTICATION (GOTRUE)
# ------------------------------------------
# Admin user for the Auth system
GOTRUE_ADMIN_EMAIL=admin@your-domain.com
GOTRUE_ADMIN_PASSWORD=CHANGE_THIS_ADMIN_PASSWORD
# Secure Token (Generate a random 32+ char string)
GOTRUE_JWT_SECRET=CHANGE_THIS_TO_A_VERY_LONG_RANDOM_STRING_32_CHARS
GOTRUE_JWT_EXP=3600
# URL for Auth API (Must match APPFLOWY_BASE_URL + /gotrue)
API_EXTERNAL_URL=https://your-domain.com/gotrue
# Internal DB Connection for Auth
GOTRUE_DATABASE_URL=postgres://postgres:CHANGE_THIS_TO_SECURE_PASSWORD@postgres:5432/postgres?search_path=auth

# üìß EMAIL CONFIGURATION (SMTP) - CRITICAL FOR PRODUCTION
# ------------------------------------------
# You MUST configure this for Sign Up / Password Recovery to work.
# Example for Gmail: smtp.gmail.com | 465 | Your Email | App Password
GOTRUE_SMTP_HOST=smtp.example.com
GOTRUE_SMTP_PORT=465
GOTRUE_SMTP_USER=apikey
GOTRUE_SMTP_PASS=your_smtp_password
GOTRUE_SMTP_ADMIN_EMAIL=admin@your-domain.com
# Security: 'true' requires email verification before login.
GOTRUE_MAILER_AUTOCONFIRM=false

# üåç SOCIAL LOGIN (OAUTH) - OPTIONAL
# ------------------------------------------
# Leave false if not using. To use, create OAuth Apps in Google/GitHub consoles.

# Google
GOTRUE_EXTERNAL_GOOGLE_ENABLED=false
GOTRUE_EXTERNAL_GOOGLE_CLIENT_ID=
GOTRUE_EXTERNAL_GOOGLE_SECRET=
GOTRUE_EXTERNAL_GOOGLE_REDIRECT_URI=https://your-domain.com/gotrue/callback

# GitHub
GOTRUE_EXTERNAL_GITHUB_ENABLED=false
GOTRUE_EXTERNAL_GITHUB_CLIENT_ID=
GOTRUE_EXTERNAL_GITHUB_SECRET=
GOTRUE_EXTERNAL_GITHUB_REDIRECT_URI=https://your-domain.com/gotrue/callback

# ‚öôÔ∏è INTERNAL APPFLOWY CONFIG
# ------------------------------------------
APPFLOWY_DATABASE_URL=postgres://postgres:CHANGE_THIS_TO_SECURE_PASSWORD@postgres:5432/postgres
APPFLOWY_GOTRUE_BASE_URL=http://gotrue:9999
APPFLOWY_ACCESS_CONTROL=true
